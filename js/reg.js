function goToUrl(){$(location).attr("href","http://zenit.staffboost.ru/public/root/streem.html")}$((function(){let e=$('input[name="email"]'),t=$('input[name="nick"]'),a=$(".one-screen__form .btn");function n(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,(function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""})),e},e.focusout((function(){n($(this).val())||$(this).parent().addClass("error")})),t.keyup((function(){nickVal=t.val(),nickVal.length>0&&$.ajax({url:"http://zenit.staffboost.ru/api/auth/register/nick",type:"POST",data:{nick:nickVal},dataType:"html"}).done((function(e){console.log("success");var a=jQuery.parseJSON(e);a.success||t.parent().addClass("error"),a.success&&t.parent().removeClass("error")})).fail((function(e){t.parent().addClass("error"),console.log(e)}))})),$(".one-screen__email-code").on("click",(function(){let t=e.val();n(t)?$.ajax({url:"http://zenit.staffboost.ru/api/auth/register/email",type:"POST",data:{email:t},dataType:"html"}).done((function(e){console.log("success"),console.log(e),alert("Код отправлен на ваш email")})).fail((function(t){e.parent().addClass("error"),alert("Ошибка отправки")})):e.parent().addClass("error")})),$(".form-reg").submit((function(e){var t=$(this).serializeObject();t.email=$.trim(t.email.toLowerCase());var a="email="+t.email+"&code="+t.code+"&name="+t.name+"&nick="+t.nick;return $.ajax({url:"http://zenit.staffboost.ru/api/auth/register/data",type:"POST",data:a,dataType:"html"}).done((function(e){let t=$.parseJSON(e);localStorage.setItem("userNick",t.authentication.nick),localStorage.setItem("userToken",t.authentication.token),goToUrl()})).fail((function(e){alert("Ошибка регистрации"),console.log(e)})),!1})),$(".form-signin").submit((function(e){var t=$(this).serializeObject();t.email=$.trim(t.email.toLowerCase());var a="email="+t.email+"&code="+t.code;return $.ajax({url:"http://zenit.staffboost.ru/api/auth/register/login",type:"POST",data:a,dataType:"html"}).done((function(e){let t=$.parseJSON(e);console.log(t),localStorage.setItem("userNick",t.authentication.nick),localStorage.setItem("userToken",t.authentication.token),goToUrl()})).fail((function(e){alert("Ошибка входа"),console.log(e)})),!1})),$("input").focus((function(){$(this).parent().removeClass("error")})),$("input").keyup((function(){var e=!0;$("input").each((function(){($(this).val().length<2||$(this).parent().hasClass("error"))&&(e=!1)})),e?a.removeClass("btn-disabled").addClass("btn-blue"):a.removeClass("btn-blue").addClass("btn-disabled")}))}));